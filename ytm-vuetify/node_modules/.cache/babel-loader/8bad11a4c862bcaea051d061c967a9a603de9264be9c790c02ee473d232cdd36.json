{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport SvgIcon from '@jamescoyle/vue-icon';\nimport { mdiLogout, mdiMusic } from '@mdi/js';\nexport default {\n  name: 'App',\n  components: {\n    SvgIcon,\n    VAudioPlayer: () => import('@woodydark/vuetify-audio-player')\n  },\n  data: () => ({\n    logoutIconPath: mdiLogout,\n    musicIconPath: mdiMusic\n  }),\n  computed: {\n    user() {\n      return this.$store.state.user;\n    },\n    loginFlag() {\n      return this.$store.state.loginFlag;\n    },\n    musicSrc() {\n      return `http://127.0.0.1:3000/stream/${this.$store.state.curTrack.track_id}`;\n    },\n    trackTitle() {\n      return this.$store.state.curTrack.title;\n    },\n    trackSubtitle() {\n      return this.$store.state.curTrack.artist.join(', ');\n    },\n    albumImg() {\n      return `http://127.0.0.1:3000/image/${this.$store.state.curAlbum.pid}.jpg`;\n    }\n  },\n  methods: {\n    logout() {\n      this.$store.commit('setUser', null);\n      this.$store.commit('setLoginFlag', false);\n      this.$router.push('/login');\n    },\n    playAlbum(album, order) {\n      // play the track of the corresponding order in the album\n      const albumId = album.pid;\n      console.log('Start to play album:', albumId, 'with order:', order);\n      // this.curAlbum = album;\n      this.$store.commit('setCurAlbum', album);\n      // this.curOrder = order;\n      this.$store.commit('setCurOrder', order);\n      // this.albumImg = `http://127.0.0.1:3000/image/${albumId}.jpg`;\n      const url = `http://127.0.0.1:3000/getTrackByOrder/?album_id=${albumId}&order=${order}`;\n      axios.get(url).then(response => {\n        // this.curTrack = response.data;\n        this.$store.commit('setCurTrack', response.data);\n        console.log('Got TrackInfo:', this.$store.state.curTrack);\n        // this.trackTitle = this.curTrack.title;\n        // this.trackSubtitle = this.curTrack.artist.join(', ');\n        // this.musicSrc = `http://127.0.0.1:3000/stream/${this.curTrack.track_id}`;\n      }).catch(error => console.error(error));\n    },\n    nextSrc() {\n      // this.curOrder = (this.curOrder + 1) % this.curAlbum.added;\n      // this.playAlbum(this.curAlbum, this.curOrder);\n      if (this.$store.state.curOrder && this.$store.state.curAlbum) {\n        const newOrder = (this.$store.state.curOrder + 1) % this.$store.state.curAlbum.added;\n        this.playAlbum(this.$store.state.curAlbum, newOrder);\n      }\n    },\n    prevSrc() {\n      // this.curOrder = (this.curOrder + this.curAlbum.added - 1) % this.curAlbum.added;\n      // this.playAlbum(this.curAlbum, this.curOrder);\n      if (this.$store.state.curOrder && this.$store.state.curAlbum) {\n        // eslint-disable-next-line max-len\n        const newOrder = (this.$store.state.curOrder + this.$store.state.curAlbum.added - 1) % this.$store.state.curAlbum.added;\n        this.playAlbum(this.$store.state.curAlbum, newOrder);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","SvgIcon","mdiLogout","mdiMusic","name","components","VAudioPlayer","data","logoutIconPath","musicIconPath","computed","user","$store","state","loginFlag","musicSrc","curTrack","track_id","trackTitle","title","trackSubtitle","artist","join","albumImg","curAlbum","pid","methods","logout","commit","$router","push","playAlbum","album","order","albumId","console","log","url","get","then","response","catch","error","nextSrc","curOrder","newOrder","added","prevSrc"],"sources":["src/App.vue"],"sourcesContent":["<template>\n  <v-app>\n    <v-app-bar\n      app\n      color=\"primary\"\n      dark\n    >\n      <div class=\"d-flex align-center\">\n        <svg-icon type=\"mdi\" :path=\"musicIconPath\"></svg-icon>\n        <span class=\"mr-2\">Music</span>\n      </div>\n      <v-spacer></v-spacer>\n      <router-link to=\"/login\" v-if=\"!loginFlag\">\n        <v-btn>\n          <span class=\"mr-2\">Login / Sign up</span>\n        </v-btn>\n      </router-link>\n      <span class=\"mr-2\" v-if=\"loginFlag\">Welcome! {{user}}</span>\n      <v-btn @click=\"logout()\" v-if=\"loginFlag\">\n        <svg-icon type=\"mdi\" :path=\"logoutIconPath\"></svg-icon>\n      </v-btn>\n    </v-app-bar>\n\n    <v-main>\n      <router-view/>\n    </v-main>\n\n    <div style=\"position: fixed; bottom: 0; width: 100%;\">\n        <v-audio-player\n            :src=\"musicSrc\"\n            :track-title=\"trackTitle\"\n            :track-subtitle=\"trackSubtitle\"\n            allow-previous\n            allow-next\n            :compact=\"$vuetify.breakpoint.smAndDown\"\n            :autoplay=\"false\"\n            :album-art=\"albumImg\"\n            @next-audio=\"nextSrc()\"\n            @previous-audio=\"prevSrc()\"\n            prev-track-icon=\"mdi-skip-previous\"\n            next-track-icon=\"mdi-skip-next\"\n            back-forward-icon=\"mdi-rewind-5\"\n            fast-forward-icon=\"fast-forward-5\"\n            play-icon=\"mdi-play\"\n            pause-icon=\"mdi-pause\"\n            mute-volume-icon=\"mdi-volume-off\"\n            low-volume-icon=\"mdi-volume-low\"\n            medium-volume-icon=\"mdi-volume-medium\"\n            high-volume-icon=\"mdi-volume-high\"\n        ></v-audio-player>\n    </div>\n  </v-app>\n</template>\n\n<script>\nimport axios from 'axios';\nimport SvgIcon from '@jamescoyle/vue-icon';\nimport { mdiLogout, mdiMusic } from '@mdi/js';\n\nexport default {\n  name: 'App',\n\n  components: {\n    SvgIcon,\n    VAudioPlayer: () => import('@woodydark/vuetify-audio-player'),\n  },\n\n  data: () => ({\n    logoutIconPath: mdiLogout,\n    musicIconPath: mdiMusic,\n  }),\n\n  computed: {\n    user() {\n      return this.$store.state.user;\n    },\n    loginFlag() {\n      return this.$store.state.loginFlag;\n    },\n    musicSrc() {\n      return `http://127.0.0.1:3000/stream/${this.$store.state.curTrack.track_id}`;\n    },\n    trackTitle() {\n      return this.$store.state.curTrack.title;\n    },\n    trackSubtitle() {\n      return this.$store.state.curTrack.artist.join(', ');\n    },\n    albumImg() {\n      return `http://127.0.0.1:3000/image/${this.$store.state.curAlbum.pid}.jpg`;\n    },\n  },\n\n  methods: {\n    logout() {\n      this.$store.commit('setUser', null);\n      this.$store.commit('setLoginFlag', false);\n      this.$router.push('/login');\n    },\n    playAlbum(album, order) { // play the track of the corresponding order in the album\n      const albumId = album.pid;\n      console.log('Start to play album:', albumId, 'with order:', order);\n      // this.curAlbum = album;\n      this.$store.commit('setCurAlbum', album);\n      // this.curOrder = order;\n      this.$store.commit('setCurOrder', order);\n      // this.albumImg = `http://127.0.0.1:3000/image/${albumId}.jpg`;\n      const url = `http://127.0.0.1:3000/getTrackByOrder/?album_id=${albumId}&order=${order}`;\n      axios\n        .get(url)\n        .then((response) => {\n          // this.curTrack = response.data;\n          this.$store.commit('setCurTrack', response.data);\n          console.log('Got TrackInfo:', this.$store.state.curTrack);\n          // this.trackTitle = this.curTrack.title;\n          // this.trackSubtitle = this.curTrack.artist.join(', ');\n          // this.musicSrc = `http://127.0.0.1:3000/stream/${this.curTrack.track_id}`;\n        })\n        .catch((error) => console.error(error));\n    },\n    nextSrc() {\n      // this.curOrder = (this.curOrder + 1) % this.curAlbum.added;\n      // this.playAlbum(this.curAlbum, this.curOrder);\n      if (this.$store.state.curOrder && this.$store.state.curAlbum) {\n        const newOrder = (this.$store.state.curOrder + 1) % this.$store.state.curAlbum.added;\n        this.playAlbum(this.$store.state.curAlbum, newOrder);\n      }\n    },\n    prevSrc() {\n      // this.curOrder = (this.curOrder + this.curAlbum.added - 1) % this.curAlbum.added;\n      // this.playAlbum(this.curAlbum, this.curOrder);\n      if (this.$store.state.curOrder && this.$store.state.curAlbum) {\n        // eslint-disable-next-line max-len\n        const newOrder = (this.$store.state.curOrder + this.$store.state.curAlbum.added - 1) % this.$store.state.curAlbum.added;\n        this.playAlbum(this.$store.state.curAlbum, newOrder);\n      }\n    },\n  },\n};\n</script>\n"],"mappings":";AAuDA,OAAAA,KAAA;AACA,OAAAC,OAAA;AACA,SAAAC,SAAA,EAAAC,QAAA;AAEA;EACAC,IAAA;EAEAC,UAAA;IACAJ,OAAA;IACAK,YAAA,EAAAA,CAAA;EACA;EAEAC,IAAA,EAAAA,CAAA;IACAC,cAAA,EAAAN,SAAA;IACAO,aAAA,EAAAN;EACA;EAEAO,QAAA;IACAC,KAAA;MACA,YAAAC,MAAA,CAAAC,KAAA,CAAAF,IAAA;IACA;IACAG,UAAA;MACA,YAAAF,MAAA,CAAAC,KAAA,CAAAC,SAAA;IACA;IACAC,SAAA;MACA,4CAAAH,MAAA,CAAAC,KAAA,CAAAG,QAAA,CAAAC,QAAA;IACA;IACAC,WAAA;MACA,YAAAN,MAAA,CAAAC,KAAA,CAAAG,QAAA,CAAAG,KAAA;IACA;IACAC,cAAA;MACA,YAAAR,MAAA,CAAAC,KAAA,CAAAG,QAAA,CAAAK,MAAA,CAAAC,IAAA;IACA;IACAC,SAAA;MACA,2CAAAX,MAAA,CAAAC,KAAA,CAAAW,QAAA,CAAAC,GAAA;IACA;EACA;EAEAC,OAAA;IACAC,OAAA;MACA,KAAAf,MAAA,CAAAgB,MAAA;MACA,KAAAhB,MAAA,CAAAgB,MAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAC,UAAAC,KAAA,EAAAC,KAAA;MAAA;MACA,MAAAC,OAAA,GAAAF,KAAA,CAAAP,GAAA;MACAU,OAAA,CAAAC,GAAA,yBAAAF,OAAA,iBAAAD,KAAA;MACA;MACA,KAAArB,MAAA,CAAAgB,MAAA,gBAAAI,KAAA;MACA;MACA,KAAApB,MAAA,CAAAgB,MAAA,gBAAAK,KAAA;MACA;MACA,MAAAI,GAAA,sDAAAH,OAAA,UAAAD,KAAA;MACAjC,KAAA,CACAsC,GAAA,CAAAD,GAAA,EACAE,IAAA,CAAAC,QAAA;QACA;QACA,KAAA5B,MAAA,CAAAgB,MAAA,gBAAAY,QAAA,CAAAjC,IAAA;QACA4B,OAAA,CAAAC,GAAA,wBAAAxB,MAAA,CAAAC,KAAA,CAAAG,QAAA;QACA;QACA;QACA;MACA,GACAyB,KAAA,CAAAC,KAAA,IAAAP,OAAA,CAAAO,KAAA,CAAAA,KAAA;IACA;IACAC,QAAA;MACA;MACA;MACA,SAAA/B,MAAA,CAAAC,KAAA,CAAA+B,QAAA,SAAAhC,MAAA,CAAAC,KAAA,CAAAW,QAAA;QACA,MAAAqB,QAAA,SAAAjC,MAAA,CAAAC,KAAA,CAAA+B,QAAA,aAAAhC,MAAA,CAAAC,KAAA,CAAAW,QAAA,CAAAsB,KAAA;QACA,KAAAf,SAAA,MAAAnB,MAAA,CAAAC,KAAA,CAAAW,QAAA,EAAAqB,QAAA;MACA;IACA;IACAE,QAAA;MACA;MACA;MACA,SAAAnC,MAAA,CAAAC,KAAA,CAAA+B,QAAA,SAAAhC,MAAA,CAAAC,KAAA,CAAAW,QAAA;QACA;QACA,MAAAqB,QAAA,SAAAjC,MAAA,CAAAC,KAAA,CAAA+B,QAAA,QAAAhC,MAAA,CAAAC,KAAA,CAAAW,QAAA,CAAAsB,KAAA,aAAAlC,MAAA,CAAAC,KAAA,CAAAW,QAAA,CAAAsB,KAAA;QACA,KAAAf,SAAA,MAAAnB,MAAA,CAAAC,KAAA,CAAAW,QAAA,EAAAqB,QAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}