{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'AlbumView',\n  components: {},\n  props: ['id', 'albumInfo'],\n  data() {\n    return {\n      tracks: []\n    };\n  },\n  methods: {\n    fetchTracks() {\n      axios.get(`http://127.0.0.1:3000/getTracksByOrder/${this.id}`).then(response => {\n        this.tracks = response.data;\n        console.log(this.tracks);\n      }).catch(error => console.error(error));\n    },\n    getDuration(time) {\n      let seconds = Math.round(time);\n      const minutes = Math.floor(seconds / 60);\n      seconds %= 60;\n      const paddedSeconds = seconds.toString().padStart(2, '0');\n      return `${minutes}:${paddedSeconds}`;\n    },\n    playAlbum(album, order) {\n      // play the track of the corresponding order in the album\n      const albumId = album.pid;\n      console.log('Start to play album:', albumId, 'with order:', order);\n      this.$store.commit('setCurAlbum', album);\n      this.$store.commit('setCurOrder', order);\n      const url = `http://127.0.0.1:3000/getTrackByOrder/?album_id=${albumId}&order=${order}`;\n      axios.get(url).then(response => {\n        this.$store.commit('setCurTrack', response.data);\n        console.log('Got TrackInfo:', this.$store.state.curTrack);\n      }).catch(error => console.error(error));\n    }\n  },\n  mounted() {\n    this.fetchTracks();\n  }\n};","map":{"version":3,"names":["axios","name","components","props","data","tracks","methods","fetchTracks","get","id","then","response","console","log","catch","error","getDuration","time","seconds","Math","round","minutes","floor","paddedSeconds","toString","padStart","playAlbum","album","order","albumId","pid","$store","commit","url","state","curTrack","mounted"],"sources":["src/views/AlbumView.vue"],"sourcesContent":["<template>\n  <v-card\n    color=\"grey lighten-4\"\n    flat\n    tile\n  >\n    <v-toolbar\n    >\n      <v-avatar>\n        <v-img\n          :src=\"`http://127.0.0.1:3000/image/${albumInfo.pid}.jpg`\"\n          alt=\"Album cover\"\n        />\n      </v-avatar>\n      <v-toolbar-title style=\"margin-left:20px;\">{{albumInfo.name}}</v-toolbar-title>\n      <v-card-text style=\"width: auto;\">{{tracks.length}} songs</v-card-text>\n      <v-spacer></v-spacer>\n\n      <v-btn icon>\n        <v-icon>mdi-heart</v-icon>\n      </v-btn>\n\n    </v-toolbar>\n\n    <v-simple-table>\n    <template v-slot:default>\n      <thead>\n        <tr>\n          <th>\n            Name\n          </th>\n          <th>\n            Artists\n          </th>\n          <th>\n            Album\n          </th>\n          <th>\n            Duration\n          </th>\n          <th>\n            Liked\n          </th>\n          <th>\n            Play\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr\n          v-for=\"(track, index) in tracks\"\n          :key=\"track.track_id\"\n        >\n          <td>{{ track.title }}</td>\n          <td>{{ track.artist.join(', ') }}</td>\n          <td>{{ track.album }}</td>\n          <td>{{ getDuration(track.length) }}</td>\n          <td><v-icon>mdi-heart-outline</v-icon></td>\n          <td>\n            <v-btn @click=\"playAlbum(albumInfo.pid, index)\">\n              <v-icon>mdi-play</v-icon>\n            </v-btn>\n          </td>\n        </tr>\n      </tbody>\n    </template>\n  </v-simple-table>\n\n  </v-card>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'AlbumView',\n\n  components: {\n  },\n\n  props: ['id', 'albumInfo'],\n\n  data() {\n    return {\n      tracks: [],\n    };\n  },\n  methods: {\n    fetchTracks() {\n      axios\n        .get(`http://127.0.0.1:3000/getTracksByOrder/${this.id}`)\n        .then((response) => {\n          this.tracks = response.data;\n          console.log(this.tracks);\n        })\n        .catch((error) => console.error(error));\n    },\n    getDuration(time) {\n      let seconds = Math.round(time);\n      const minutes = Math.floor(seconds / 60);\n      seconds %= 60;\n      const paddedSeconds = seconds.toString().padStart(2, '0');\n      return `${minutes}:${paddedSeconds}`;\n    },\n    playAlbum(album, order) { // play the track of the corresponding order in the album\n      const albumId = album.pid;\n      console.log('Start to play album:', albumId, 'with order:', order);\n      this.$store.commit('setCurAlbum', album);\n      this.$store.commit('setCurOrder', order);\n      const url = `http://127.0.0.1:3000/getTrackByOrder/?album_id=${albumId}&order=${order}`;\n      axios\n        .get(url)\n        .then((response) => {\n          this.$store.commit('setCurTrack', response.data);\n          console.log('Got TrackInfo:', this.$store.state.curTrack);\n        })\n        .catch((error) => console.error(error));\n    },\n  },\n  mounted() {\n    this.fetchTracks();\n  },\n};\n</script>\n"],"mappings":"AAwEA,OAAAA,KAAA;AAEA;EACAC,IAAA;EAEAC,UAAA,GACA;EAEAC,KAAA;EAEAC,KAAA;IACA;MACAC,MAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACAP,KAAA,CACAQ,GAAA,gDAAAC,EAAA,IACAC,IAAA,CAAAC,QAAA;QACA,KAAAN,MAAA,GAAAM,QAAA,CAAAP,IAAA;QACAQ,OAAA,CAAAC,GAAA,MAAAR,MAAA;MACA,GACAS,KAAA,CAAAC,KAAA,IAAAH,OAAA,CAAAG,KAAA,CAAAA,KAAA;IACA;IACAC,YAAAC,IAAA;MACA,IAAAC,OAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAH,IAAA;MACA,MAAAI,OAAA,GAAAF,IAAA,CAAAG,KAAA,CAAAJ,OAAA;MACAA,OAAA;MACA,MAAAK,aAAA,GAAAL,OAAA,CAAAM,QAAA,GAAAC,QAAA;MACA,UAAAJ,OAAA,IAAAE,aAAA;IACA;IACAG,UAAAC,KAAA,EAAAC,KAAA;MAAA;MACA,MAAAC,OAAA,GAAAF,KAAA,CAAAG,GAAA;MACAlB,OAAA,CAAAC,GAAA,yBAAAgB,OAAA,iBAAAD,KAAA;MACA,KAAAG,MAAA,CAAAC,MAAA,gBAAAL,KAAA;MACA,KAAAI,MAAA,CAAAC,MAAA,gBAAAJ,KAAA;MACA,MAAAK,GAAA,sDAAAJ,OAAA,UAAAD,KAAA;MACA5B,KAAA,CACAQ,GAAA,CAAAyB,GAAA,EACAvB,IAAA,CAAAC,QAAA;QACA,KAAAoB,MAAA,CAAAC,MAAA,gBAAArB,QAAA,CAAAP,IAAA;QACAQ,OAAA,CAAAC,GAAA,wBAAAkB,MAAA,CAAAG,KAAA,CAAAC,QAAA;MACA,GACArB,KAAA,CAAAC,KAAA,IAAAH,OAAA,CAAAG,KAAA,CAAAA,KAAA;IACA;EACA;EACAqB,QAAA;IACA,KAAA7B,WAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}