{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport SvgIcon from '@jamescoyle/vue-icon';\nimport { mdiPlay, mdiPause } from '@mdi/js';\nexport default {\n  name: 'ExploreView',\n  components: {\n    SvgIcon\n  },\n  data() {\n    return {\n      playIconPath: mdiPlay,\n      pauseIconPath: mdiPause,\n      playingFlag: false,\n      model: null,\n      albums: [],\n      musicSrc: null,\n      trackTitle: null,\n      trackSubtitle: null,\n      albumImg: null\n    };\n  },\n  methods: {\n    fetchAlbums() {\n      axios.get('http://127.0.0.1:3000/album').then(response => {\n        this.albums = response.data;\n        console.log(this.albums);\n      }).catch(error => console.error(error));\n    },\n    playAlbum(album, order) {\n      // play the track of the corresponding order in the album\n      const albumId = album.pid;\n      console.log('Start to play album:', albumId, 'with order:', order);\n      this.curAlbum = album;\n      this.curOrder = order;\n      this.albumImg = `http://127.0.0.1:3000/image/${albumId}.jpg`;\n      const url = `http://127.0.0.1:3000/getTrackByOrder/?album_id=${albumId}&order=${order}`;\n      axios.get(url).then(response => {\n        this.curTrack = response.data;\n        console.log('Got TrackInfo:', this.curTrack);\n        this.trackTitle = this.curTrack.title;\n        this.trackSubtitle = this.curTrack.artist.join(', ');\n        this.musicSrc = `http://127.0.0.1:3000/stream/${this.curTrack.track_id}`;\n      }).catch(error => console.error(error));\n    },\n    openAlbum(pid, albumName) {\n      this.$router.push({\n        name: 'album',\n        params: {\n          id: pid,\n          name: albumName\n        }\n      });\n    }\n  },\n  mounted() {\n    this.fetchAlbums();\n  }\n};","map":{"version":3,"names":["axios","SvgIcon","mdiPlay","mdiPause","name","components","data","playIconPath","pauseIconPath","playingFlag","model","albums","musicSrc","trackTitle","trackSubtitle","albumImg","methods","fetchAlbums","get","then","response","console","log","catch","error","playAlbum","album","order","albumId","pid","curAlbum","curOrder","url","curTrack","title","artist","join","track_id","openAlbum","albumName","$router","push","params","id","mounted"],"sources":["src/views/ExploreView.vue"],"sourcesContent":["<template>\n<v-sheet\n    class=\"mx-auto\"\n    elevation=\"8\"\n>\n\n<v-slide-group\n      v-model=\"model\"\n      class=\"pa-4\"\n      active-class=\"success\"\n      show-arrows\n    >\n    <v-slide-item\n        v-for=\"album in albums\"\n        :key=\"album.pid\"\n        class=\"album\"\n    >\n        <v-card\n            class=\"ma-4\"\n            height=\"300\"\n            width=\"250\"\n            @click=\"openAlbum(album.pid, album.name)\"\n        >\n            <div class=\"text-center text-truncate\" style=\"margin:auto;\">{{ album.name }}</div>\n            <v-card-actions class=\"d-flex flex-column align-center\">\n                <v-img :src=\"`http://127.0.0.1:3000/image/${album.pid}.jpg`\" alt=\"Album cover\" height=\"200\" width=\"200\"/>\n                <v-btn @click.stop=\"playAlbum(album,0)\" style=\"margin-top:15px;\">\n                    <svg-icon type=\"mdi\" :path=\"playIconPath\"></svg-icon>\n                </v-btn>\n            </v-card-actions>\n        </v-card>\n    </v-slide-item>\n</v-slide-group>\n\n</v-sheet>\n</template>\n\n<script>\nimport axios from 'axios';\nimport SvgIcon from '@jamescoyle/vue-icon';\nimport { mdiPlay, mdiPause } from '@mdi/js';\n\nexport default {\n  name: 'ExploreView',\n\n  components: {\n    SvgIcon,\n  },\n\n  data() {\n    return {\n      playIconPath: mdiPlay,\n      pauseIconPath: mdiPause,\n      playingFlag: false,\n      model: null,\n      albums: [],\n      musicSrc: null,\n      trackTitle: null,\n      trackSubtitle: null,\n      albumImg: null,\n    };\n  },\n  methods: {\n    fetchAlbums() {\n      axios\n        .get('http://127.0.0.1:3000/album')\n        .then((response) => {\n          this.albums = response.data;\n          console.log(this.albums);\n        })\n        .catch((error) => console.error(error));\n    },\n    playAlbum(album, order) { // play the track of the corresponding order in the album\n      const albumId = album.pid;\n      console.log('Start to play album:', albumId, 'with order:', order);\n      this.curAlbum = album;\n      this.curOrder = order;\n      this.albumImg = `http://127.0.0.1:3000/image/${albumId}.jpg`;\n      const url = `http://127.0.0.1:3000/getTrackByOrder/?album_id=${albumId}&order=${order}`;\n      axios\n        .get(url)\n        .then((response) => {\n          this.curTrack = response.data;\n          console.log('Got TrackInfo:', this.curTrack);\n          this.trackTitle = this.curTrack.title;\n          this.trackSubtitle = this.curTrack.artist.join(', ');\n          this.musicSrc = `http://127.0.0.1:3000/stream/${this.curTrack.track_id}`;\n        })\n        .catch((error) => console.error(error));\n    },\n    openAlbum(pid, albumName) {\n      this.$router.push({ name: 'album', params: { id: pid, name: albumName } });\n    },\n  },\n  mounted() {\n    this.fetchAlbums();\n  },\n};\n</script>\n\n<style scoped>\n.album {\n}\n.text-truncate {\n  max-width: 200px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n</style>\n"],"mappings":";AAsCA,OAAAA,KAAA;AACA,OAAAC,OAAA;AACA,SAAAC,OAAA,EAAAC,QAAA;AAEA;EACAC,IAAA;EAEAC,UAAA;IACAJ;EACA;EAEAK,KAAA;IACA;MACAC,YAAA,EAAAL,OAAA;MACAM,aAAA,EAAAL,QAAA;MACAM,WAAA;MACAC,KAAA;MACAC,MAAA;MACAC,QAAA;MACAC,UAAA;MACAC,aAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACAjB,KAAA,CACAkB,GAAA,gCACAC,IAAA,CAAAC,QAAA;QACA,KAAAT,MAAA,GAAAS,QAAA,CAAAd,IAAA;QACAe,OAAA,CAAAC,GAAA,MAAAX,MAAA;MACA,GACAY,KAAA,CAAAC,KAAA,IAAAH,OAAA,CAAAG,KAAA,CAAAA,KAAA;IACA;IACAC,UAAAC,KAAA,EAAAC,KAAA;MAAA;MACA,MAAAC,OAAA,GAAAF,KAAA,CAAAG,GAAA;MACAR,OAAA,CAAAC,GAAA,yBAAAM,OAAA,iBAAAD,KAAA;MACA,KAAAG,QAAA,GAAAJ,KAAA;MACA,KAAAK,QAAA,GAAAJ,KAAA;MACA,KAAAZ,QAAA,kCAAAa,OAAA;MACA,MAAAI,GAAA,sDAAAJ,OAAA,UAAAD,KAAA;MACA3B,KAAA,CACAkB,GAAA,CAAAc,GAAA,EACAb,IAAA,CAAAC,QAAA;QACA,KAAAa,QAAA,GAAAb,QAAA,CAAAd,IAAA;QACAe,OAAA,CAAAC,GAAA,wBAAAW,QAAA;QACA,KAAApB,UAAA,QAAAoB,QAAA,CAAAC,KAAA;QACA,KAAApB,aAAA,QAAAmB,QAAA,CAAAE,MAAA,CAAAC,IAAA;QACA,KAAAxB,QAAA,wCAAAqB,QAAA,CAAAI,QAAA;MACA,GACAd,KAAA,CAAAC,KAAA,IAAAH,OAAA,CAAAG,KAAA,CAAAA,KAAA;IACA;IACAc,UAAAT,GAAA,EAAAU,SAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QAAArC,IAAA;QAAAsC,MAAA;UAAAC,EAAA,EAAAd,GAAA;UAAAzB,IAAA,EAAAmC;QAAA;MAAA;IACA;EACA;EACAK,QAAA;IACA,KAAA3B,WAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}