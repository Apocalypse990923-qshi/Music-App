{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport SvgIcon from '@jamescoyle/vue-icon';\nimport { mdiPlay, mdiPause, mdiArrowLeft } from '@mdi/js';\nexport default {\n  name: 'LibraryView',\n  computed: {\n    user() {\n      return this.$store.state.user.name;\n    }\n  },\n  components: {\n    SvgIcon\n  },\n  props: ['id'],\n  data() {\n    return {\n      dialog: false,\n      backIconPath: mdiArrowLeft,\n      playIconPath: mdiPlay,\n      pauseIconPath: mdiPause,\n      albums: null,\n      playlists: null\n    };\n  },\n  methods: {\n    fetchUserLibrary() {\n      axios.get(`http://127.0.0.1:3000/user/${this.id}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      }).then(response => {\n        this.albums = response.data.albums;\n        console.log(this.albums);\n        this.playlists = response.data.playlists;\n        console.log(this.playlists);\n      }).catch(error => console.error(error));\n    },\n    playAlbum(album, order) {\n      // play the track of the corresponding order in the album\n      const albumId = album.pid;\n      console.log('Start to play album:', albumId, 'with order:', order);\n      this.$store.commit('setCurAlbum', album);\n      this.$store.commit('setCurOrder', order);\n      const url = `http://127.0.0.1:3000/getTrackByOrder/?album_id=${albumId}&order=${order}`;\n      axios.get(url).then(response => {\n        this.$store.commit('setCurTrack', response.data);\n        console.log('Got TrackInfo:', this.$store.state.curTrack);\n      }).catch(error => console.error(error));\n    },\n    openAlbum(album) {\n      if (album.type === 'playlist') {\n        this.$router.push({\n          name: 'playlist',\n          params: {\n            id: album.pid,\n            albumInfo: album\n          }\n        });\n      }\n      this.$router.push({\n        name: 'album',\n        params: {\n          id: album.pid,\n          albumInfo: album\n        }\n      });\n    },\n    goBack() {\n      this.$router.push('/explore');\n    },\n    createPlaylist() {\n      console.log('Create new Playlist!', this.playlistName);\n    }\n  },\n  mounted() {\n    this.fetchUserLibrary();\n  }\n};","map":{"version":3,"names":["axios","SvgIcon","mdiPlay","mdiPause","mdiArrowLeft","name","computed","user","$store","state","components","props","data","dialog","backIconPath","playIconPath","pauseIconPath","albums","playlists","methods","fetchUserLibrary","get","id","headers","Authorization","localStorage","getItem","then","response","console","log","catch","error","playAlbum","album","order","albumId","pid","commit","url","curTrack","openAlbum","type","$router","push","params","albumInfo","goBack","createPlaylist","playlistName","mounted"],"sources":["src/views/LibraryView.vue"],"sourcesContent":["<template>\n<v-sheet\n    class=\"mx-auto\"\n    style=\"padding-bottom:100px;\"\n>\n  <v-toolbar>\n    <v-btn icon style=\"margin-right:20px;\" @click=\"goBack\">\n        <svg-icon type=\"mdi\" :path=\"backIconPath\"></svg-icon>\n    </v-btn>\n    <span style=\"font-size:20pt;\">{{user}}'s Library</span>\n  </v-toolbar>\n<v-banner shaped>\n  <span style=\"font-size:15pt;\">Albums</span>\n</v-banner>\n<v-slide-group\n      v-model=\"model\"\n      active-class=\"success\"\n      show-arrows\n    >\n    <v-slide-item\n        v-for=\"album in albums\"\n        :key=\"album.pid\"\n        class=\"album\"\n    >\n        <v-card\n            class=\"ma-4\"\n            height=\"300\"\n            width=\"250\"\n            @click=\"openAlbum(album)\"\n        >\n            <div class=\"text-center text-truncate\" style=\"margin:auto;\">{{ album.name }}</div>\n            <v-card-actions class=\"d-flex flex-column align-center\">\n                <v-img :src=\"`http://127.0.0.1:3000/image/${album.pid}.jpg`\" alt=\"Album cover\" height=\"200\" width=\"200\"/>\n                <v-btn @click.stop=\"playAlbum(album,0)\" style=\"margin-top:15px;\">\n                    <svg-icon type=\"mdi\" :path=\"playIconPath\"></svg-icon>\n                </v-btn>\n            </v-card-actions>\n        </v-card>\n    </v-slide-item>\n</v-slide-group>\n<v-btn\n    color=\"primary\"\n    elevation=\"5\"\n    x-large\n    style=\"margin:20px;\"\n    @click=\"goBack()\"\n  >Explore</v-btn>\n<v-divider></v-divider>\n\n<v-banner shaped>\n  <span style=\"font-size:15pt;\">Playlists</span>\n</v-banner>\n\n<v-slide-group\n      v-model=\"model\"\n      active-class=\"success\"\n      show-arrows\n    >\n    <v-slide-item\n        v-for=\"playlist in playlists\"\n        :key=\"playlist.pid\"\n        class=\"album\"\n    >\n        <v-card\n            class=\"ma-4\"\n            height=\"300\"\n            width=\"250\"\n            @click=\"openAlbum(playlist)\"\n        >\n            <div class=\"text-center text-truncate\" style=\"margin:auto;\">{{ playlist.name }}</div>\n            <v-card-actions class=\"d-flex flex-column align-center\">\n                <v-img src='http://127.0.0.1:3000/image/default_playlist_image.jpg' alt=\"Album cover\" height=\"200\" width=\"200\"/>\n                <v-btn @click.stop=\"playAlbum(playlist,0)\" style=\"margin-top:15px;\">\n                    <svg-icon type=\"mdi\" :path=\"playIconPath\"></svg-icon>\n                </v-btn>\n            </v-card-actions>\n        </v-card>\n    </v-slide-item>\n</v-slide-group>\n<v-dialog\n      v-model=\"dialog\"\n      width=\"500\"\n>\n  <template v-slot:activator=\"{ on, attrs }\">\n    <v-btn\n      color=\"primary\"\n      elevation=\"5\"\n      v-bind=\"attrs\"\n      v-on=\"on\"\n      x-large\n      style=\"margin:20px;\"\n    >Create</v-btn>\n  </template>\n  <v-card>\n        <v-card-title class=\"text-h5\">\n          Name the new Playlist\n        </v-card-title>\n        <v-text-field\n          v-model=\"playlistName\"\n          label=\"name\"\n          required\n          style=\"margin-left:25px;margin-right:25px;\"\n        ></v-text-field>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"primary\"\n            text\n            @click=\"dialog = false;createPlaylist()\"\n          >\n            Continue\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n</v-dialog>\n</v-sheet>\n</template>\n\n<script>\nimport axios from 'axios';\nimport SvgIcon from '@jamescoyle/vue-icon';\nimport { mdiPlay, mdiPause, mdiArrowLeft } from '@mdi/js';\n\nexport default {\n  name: 'LibraryView',\n\n  computed: {\n    user() {\n      return this.$store.state.user.name;\n    },\n  },\n\n  components: {\n    SvgIcon,\n  },\n\n  props: ['id'],\n\n  data() {\n    return {\n      dialog: false,\n      backIconPath: mdiArrowLeft,\n      playIconPath: mdiPlay,\n      pauseIconPath: mdiPause,\n      albums: null,\n      playlists: null,\n    };\n  },\n  methods: {\n    fetchUserLibrary() {\n      axios\n        .get(`http://127.0.0.1:3000/user/${this.id}`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\n          },\n        })\n        .then((response) => {\n          this.albums = response.data.albums;\n          console.log(this.albums);\n          this.playlists = response.data.playlists;\n          console.log(this.playlists);\n        })\n        .catch((error) => console.error(error));\n    },\n    playAlbum(album, order) { // play the track of the corresponding order in the album\n      const albumId = album.pid;\n      console.log('Start to play album:', albumId, 'with order:', order);\n      this.$store.commit('setCurAlbum', album);\n      this.$store.commit('setCurOrder', order);\n      const url = `http://127.0.0.1:3000/getTrackByOrder/?album_id=${albumId}&order=${order}`;\n      axios\n        .get(url)\n        .then((response) => {\n          this.$store.commit('setCurTrack', response.data);\n          console.log('Got TrackInfo:', this.$store.state.curTrack);\n        })\n        .catch((error) => console.error(error));\n    },\n    openAlbum(album) {\n      if (album.type === 'playlist') {\n        this.$router.push({ name: 'playlist', params: { id: album.pid, albumInfo: album } });\n      }\n      this.$router.push({ name: 'album', params: { id: album.pid, albumInfo: album } });\n    },\n    goBack() {\n      this.$router.push('/explore');\n    },\n    createPlaylist() {\n      console.log('Create new Playlist!', this.playlistName);\n    },\n  },\n  mounted() {\n    this.fetchUserLibrary();\n  },\n};\n</script>\n"],"mappings":";AAuHA,OAAAA,KAAA;AACA,OAAAC,OAAA;AACA,SAAAC,OAAA,EAAAC,QAAA,EAAAC,YAAA;AAEA;EACAC,IAAA;EAEAC,QAAA;IACAC,KAAA;MACA,YAAAC,MAAA,CAAAC,KAAA,CAAAF,IAAA,CAAAF,IAAA;IACA;EACA;EAEAK,UAAA;IACAT;EACA;EAEAU,KAAA;EAEAC,KAAA;IACA;MACAC,MAAA;MACAC,YAAA,EAAAV,YAAA;MACAW,YAAA,EAAAb,OAAA;MACAc,aAAA,EAAAb,QAAA;MACAc,MAAA;MACAC,SAAA;IACA;EACA;EACAC,OAAA;IACAC,iBAAA;MACApB,KAAA,CACAqB,GAAA,oCAAAC,EAAA;QACAC,OAAA;UACAC,aAAA,YAAAC,YAAA,CAAAC,OAAA;QACA;MACA,GACAC,IAAA,CAAAC,QAAA;QACA,KAAAX,MAAA,GAAAW,QAAA,CAAAhB,IAAA,CAAAK,MAAA;QACAY,OAAA,CAAAC,GAAA,MAAAb,MAAA;QACA,KAAAC,SAAA,GAAAU,QAAA,CAAAhB,IAAA,CAAAM,SAAA;QACAW,OAAA,CAAAC,GAAA,MAAAZ,SAAA;MACA,GACAa,KAAA,CAAAC,KAAA,IAAAH,OAAA,CAAAG,KAAA,CAAAA,KAAA;IACA;IACAC,UAAAC,KAAA,EAAAC,KAAA;MAAA;MACA,MAAAC,OAAA,GAAAF,KAAA,CAAAG,GAAA;MACAR,OAAA,CAAAC,GAAA,yBAAAM,OAAA,iBAAAD,KAAA;MACA,KAAA3B,MAAA,CAAA8B,MAAA,gBAAAJ,KAAA;MACA,KAAA1B,MAAA,CAAA8B,MAAA,gBAAAH,KAAA;MACA,MAAAI,GAAA,sDAAAH,OAAA,UAAAD,KAAA;MACAnC,KAAA,CACAqB,GAAA,CAAAkB,GAAA,EACAZ,IAAA,CAAAC,QAAA;QACA,KAAApB,MAAA,CAAA8B,MAAA,gBAAAV,QAAA,CAAAhB,IAAA;QACAiB,OAAA,CAAAC,GAAA,wBAAAtB,MAAA,CAAAC,KAAA,CAAA+B,QAAA;MACA,GACAT,KAAA,CAAAC,KAAA,IAAAH,OAAA,CAAAG,KAAA,CAAAA,KAAA;IACA;IACAS,UAAAP,KAAA;MACA,IAAAA,KAAA,CAAAQ,IAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;UAAAvC,IAAA;UAAAwC,MAAA;YAAAvB,EAAA,EAAAY,KAAA,CAAAG,GAAA;YAAAS,SAAA,EAAAZ;UAAA;QAAA;MACA;MACA,KAAAS,OAAA,CAAAC,IAAA;QAAAvC,IAAA;QAAAwC,MAAA;UAAAvB,EAAA,EAAAY,KAAA,CAAAG,GAAA;UAAAS,SAAA,EAAAZ;QAAA;MAAA;IACA;IACAa,OAAA;MACA,KAAAJ,OAAA,CAAAC,IAAA;IACA;IACAI,eAAA;MACAnB,OAAA,CAAAC,GAAA,8BAAAmB,YAAA;IACA;EACA;EACAC,QAAA;IACA,KAAA9B,gBAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}