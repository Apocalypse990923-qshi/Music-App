{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'ExploreView',\n  components: {\n    VAudioPlayer: () => import('@woodydark/vuetify-audio-player')\n  },\n  data() {\n    return {\n      albums: [],\n      curAlbum: null,\n      curOrder: null,\n      curTrack: null,\n      musicSrc: null,\n      trackTitle: null,\n      trackSubtitle: null,\n      albumImg: null\n    };\n  },\n  methods: {\n    fetchAlbums() {\n      axios.get('http://127.0.0.1:3000/explore').then(response => {\n        this.albums = response.data;\n        console.log(this.albums);\n      }).catch(error => console.error(error));\n    },\n    playAlbum(album, order) {\n      // return the track_id of the corresponding order in the album\n      const albumId = album.pid;\n      console.log('Start to play album:', albumId, 'with order:', order);\n      this.curAlbum = album;\n      this.curOrder = order;\n      this.albumImg = `http://127.0.0.1:3000/getCoverImage/${albumId}.jpg`;\n      const url = `http://127.0.0.1:3000/getTrackInfo/?album_id=${albumId}&order=${order}`;\n      axios.get(url).then(response => {\n        this.curTrack = response.data;\n        console.log('Got TrackInfo:', this.curTrack);\n        this.trackTitle = this.curTrack.title;\n        this.trackSubtitle = this.curTrack.artist.join(',');\n        this.musicSrc = `http://127.0.0.1:3000/stream/${this.curTrack.track_id}`;\n      }).catch(error => console.error(error));\n    },\n    nextSrc() {\n      this.curOrder = (this.curOrder + 1) % this.curAlbum.added;\n      this.playAlbum(this.curAlbum, this.curOrder);\n    },\n    prevSrc() {\n      this.curOrder = (this.curOrder + this.curAlbum.added - 1) % this.curAlbum.added;\n      this.playAlbum(this.curAlbum, this.curOrder);\n    }\n  },\n  mounted() {\n    this.fetchAlbums();\n  }\n};","map":{"version":3,"names":["axios","name","components","VAudioPlayer","data","albums","curAlbum","curOrder","curTrack","musicSrc","trackTitle","trackSubtitle","albumImg","methods","fetchAlbums","get","then","response","console","log","catch","error","playAlbum","album","order","albumId","pid","url","title","artist","join","track_id","nextSrc","added","prevSrc","mounted"],"sources":["src/views/ExploreView.vue"],"sourcesContent":["<template>\n  <div>\n    <div v-for=\"album in albums\" :key=\"album.pid\" class=\"album\">\n      <v-img :src=\"`http://127.0.0.1:3000/getCoverImage/${album.pid}.jpg`\" alt=\"Album cover\" height=\"200\" width=\"200\"/>\n      <h2>{{ album.name }}</h2>\n      <v-btn @click=\"playAlbum(album,0)\">Play First Track of the Album</v-btn>\n    </div>\n    <div style=\"position: fixed; bottom: 0; width: 100%;\">\n        <v-audio-player\n            :src=\"musicSrc\"\n            :track-title=\"trackTitle\"\n            :track-subtitle=\"trackSubtitle\"\n            allow-previous\n            allow-next\n            :compact=\"$vuetify.breakpoint.smAndDown\"\n            :autoplay=\"false\"\n            :album-art=\"albumImg\"\n            @next-audio=\"nextSrc()\"\n            @previous-audio=\"prevSrc()\"\n            prev-track-icon=\"mdi-skip-previous\"\n            next-track-icon=\"mdi-skip-next\"\n            back-forward-icon=\"mdi-rewind-5\"\n            fast-forward-icon=\"fast-forward-5\"\n            play-icon=\"mdi-play\"\n            pause-icon=\"mdi-pause\"\n            mute-volume-icon=\"mdi-volume-off\"\n            low-volume-icon=\"mdi-volume-low\"\n            medium-volume-icon=\"mdi-volume-medium\"\n            high-volume-icon=\"mdi-volume-high\"\n        ></v-audio-player>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'ExploreView',\n\n  components: {\n    VAudioPlayer: () => import('@woodydark/vuetify-audio-player'),\n  },\n\n  data() {\n    return {\n      albums: [],\n      curAlbum: null,\n      curOrder: null,\n      curTrack: null,\n      musicSrc: null,\n      trackTitle: null,\n      trackSubtitle: null,\n      albumImg: null,\n    };\n  },\n  methods: {\n    fetchAlbums() {\n      axios\n        .get('http://127.0.0.1:3000/explore')\n        .then((response) => {\n          this.albums = response.data;\n          console.log(this.albums);\n        })\n        .catch((error) => console.error(error));\n    },\n    playAlbum(album, order) { // return the track_id of the corresponding order in the album\n      const albumId = album.pid;\n      console.log('Start to play album:', albumId, 'with order:', order);\n      this.curAlbum = album;\n      this.curOrder = order;\n      this.albumImg = `http://127.0.0.1:3000/getCoverImage/${albumId}.jpg`;\n      const url = `http://127.0.0.1:3000/getTrackInfo/?album_id=${albumId}&order=${order}`;\n      axios\n        .get(url)\n        .then((response) => {\n          this.curTrack = response.data;\n          console.log('Got TrackInfo:', this.curTrack);\n          this.trackTitle = this.curTrack.title;\n          this.trackSubtitle = this.curTrack.artist.join(',');\n          this.musicSrc = `http://127.0.0.1:3000/stream/${this.curTrack.track_id}`;\n        })\n        .catch((error) => console.error(error));\n    },\n    nextSrc() {\n      this.curOrder = (this.curOrder + 1) % this.curAlbum.added;\n      this.playAlbum(this.curAlbum, this.curOrder);\n    },\n    prevSrc() {\n      this.curOrder = (this.curOrder + this.curAlbum.added - 1) % this.curAlbum.added;\n      this.playAlbum(this.curAlbum, this.curOrder);\n    },\n  },\n  mounted() {\n    this.fetchAlbums();\n  },\n};\n</script>\n\n<style scoped>\n/* Add any specific styles for your album display here */\n.album {\n}\n</style>\n"],"mappings":"AAmCA,OAAAA,KAAA;AAEA;EACAC,IAAA;EAEAC,UAAA;IACAC,YAAA,EAAAA,CAAA;EACA;EAEAC,KAAA;IACA;MACAC,MAAA;MACAC,QAAA;MACAC,QAAA;MACAC,QAAA;MACAC,QAAA;MACAC,UAAA;MACAC,aAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACAd,KAAA,CACAe,GAAA,kCACAC,IAAA,CAAAC,QAAA;QACA,KAAAZ,MAAA,GAAAY,QAAA,CAAAb,IAAA;QACAc,OAAA,CAAAC,GAAA,MAAAd,MAAA;MACA,GACAe,KAAA,CAAAC,KAAA,IAAAH,OAAA,CAAAG,KAAA,CAAAA,KAAA;IACA;IACAC,UAAAC,KAAA,EAAAC,KAAA;MAAA;MACA,MAAAC,OAAA,GAAAF,KAAA,CAAAG,GAAA;MACAR,OAAA,CAAAC,GAAA,yBAAAM,OAAA,iBAAAD,KAAA;MACA,KAAAlB,QAAA,GAAAiB,KAAA;MACA,KAAAhB,QAAA,GAAAiB,KAAA;MACA,KAAAZ,QAAA,0CAAAa,OAAA;MACA,MAAAE,GAAA,mDAAAF,OAAA,UAAAD,KAAA;MACAxB,KAAA,CACAe,GAAA,CAAAY,GAAA,EACAX,IAAA,CAAAC,QAAA;QACA,KAAAT,QAAA,GAAAS,QAAA,CAAAb,IAAA;QACAc,OAAA,CAAAC,GAAA,wBAAAX,QAAA;QACA,KAAAE,UAAA,QAAAF,QAAA,CAAAoB,KAAA;QACA,KAAAjB,aAAA,QAAAH,QAAA,CAAAqB,MAAA,CAAAC,IAAA;QACA,KAAArB,QAAA,wCAAAD,QAAA,CAAAuB,QAAA;MACA,GACAX,KAAA,CAAAC,KAAA,IAAAH,OAAA,CAAAG,KAAA,CAAAA,KAAA;IACA;IACAW,QAAA;MACA,KAAAzB,QAAA,SAAAA,QAAA,aAAAD,QAAA,CAAA2B,KAAA;MACA,KAAAX,SAAA,MAAAhB,QAAA,OAAAC,QAAA;IACA;IACA2B,QAAA;MACA,KAAA3B,QAAA,SAAAA,QAAA,QAAAD,QAAA,CAAA2B,KAAA,aAAA3B,QAAA,CAAA2B,KAAA;MACA,KAAAX,SAAA,MAAAhB,QAAA,OAAAC,QAAA;IACA;EACA;EACA4B,QAAA;IACA,KAAArB,WAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}